define(["jquery","jquery.ui","jquery.validation","jquery-scrollto","jquery.ajax_load","jquery.msg","blockui","bootstrap","angular","angular-bootstrap"],function(){$(function(){var j=angular.module("jslibrary",["ui.bootstrap"]),d=function(k,m,l){k.modal=l;k.ok=function(){m.close(true)};k.close=function(){m.close(false)}},b=function(){return{restrict:"A",scope:true,controller:["$scope","$element","$attrs","$jsUrl","$window","$modal","$timeout",function(n,m,k,l,q,o,p){m.bind("click",function(){p(function(){var r=n.$eval(k.ngDelete);var s=o.open(r.optionsModal);s.result.then(function(t){if(t){$().ajaxLoad({type:"post",url:r.url,timeout:15000,data:r.data,message:"Excluido...",success:function(u){$.unblockUI();l.goToPath(r.urlRedirect)},error:function(v,u){if(v.readyState==0||v.status==0){return}if(u=="timeout"){$().msgError("<strong>Por Favor, Tente Novamente!</strong>")}else{$(r.selectorMessage).showMessageErr(v.responseText)}}})}});s.opened.then(function(t){if(t){setTimeout(function(){$(".modal").find(".modal-footer").find("button").eq(0).focus();$(".modal").draggable({cursor:"move"})},100)}})})})}]}},i=function(){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(m,l,k,n){$(l).click(function(o){var p=this;n(function(){m[k.ngModel]=k.value;$(p).closest("form").submit()})})}]}},g=function(){return{restrict:"A",controller:["$scope","$attrs","$parse",function(m,l,n){var o,k,p;if(l.type==="checkbox"||l.type==="radio"){if(l.type==="checkbox"){o=l.checked}else{if(l.checked){o=l.ngInitial||l.value}}}else{o=l.ngInitial||l.value}if(o!==undefined){if(l.varType==undefined){o=o===""?"":o}else{o=Boolean(parseInt(o))}k=n(l.ngModel);p=k.assign;return p(m,o)}}]}},e=function(){return{restrict:"A",controller:["$element","$attrs","$jsUrl",function(m,k,l){m.bind("click",function(){l.goToPath(k.ngGotopath,k.target)})}]}},c=function(){return{restrict:"A",scope:{message:"=ngModel"},controller:["$scope","$element","$attrs",function(m,l,k){m.$watch(k.ngModel,function(n){l.html(n)})}]}},a=function(k,l,n){var m=this;this.selectorCodigo="";this.optionsModal={backdrop:true,keyboard:true,};this.validate=function(o){var p=p=$.fn.validate;$.fn.validate=function(t){if(t&&t.rules){for(var r in t.rules){var s=t.rules[r];if(s.required===true){var q=$("label[for='"+r+"']");q.html("* "+q.html())}}}return $.proxy(p,this)(t)};$(o).validate(m.optionsValidation)};this.optionsValidation={rules:{},messages:{},highlight:function(o){$(o).closest(".form-group").addClass("has-error")},success:function(o){$("input[name='"+o.attr("for")+"']").addClass("valid").closest(".form-group").removeClass("has-error")},errorPlacement:function(o,q){var p=q.closest(".form-group").find(".help-block");if(p.length){p.html("<li>"+o.html()+"</li>")}else{q.closest(".form-group").append("<ul class='help-block'><li>"+o.html()+"</li></ul>")}},invalidHandler:function(t,q){var s=q.numberOfInvalids();if(s>0){var p=q.invalidElements();var r=$(p[0]);var o=$("label[for='"+r.attr("name")+"']");if(o.length>0){$("label[for='"+r.attr("name")+"']").ScrollTo({offsetTop:49})}else{$(p[0]).ScrollTo({offsetTop:59})}}},submitHandler:function(o){if($(m.selectorCodigo).val()!=""){k.$apply(function(){var p=l.open(m.optionsModal);p.result.then(function(q){if(q){o.submit()}});p.opened.then(function(q){if(q){setTimeout(function(){$(".modal").find(".modal-footer").find("button").eq(0).focus();$(".modal").draggable({cursor:"move"})},100)}})})}else{o.submit()}}};$(".modal").on("shown.bs.modal",function(o){})},h=function(k){this.goToPath=function(l,m){if(m===undefined){k.location.href=l}else{k.open(l,m)}}},f=function(k){this.showTooltip=function(m,p,l){var o=$(m),n=angular.element(o).scope();n[l]=p;k.setTimeout(function(){o.blur().focus()},100)};this.hideTooltip=function(m,l){var o=$(m),n=angular.element(o).scope();n[l]="";k.setTimeout(function(){o.blur().focus()},100)}};j.controller("ModalSimpleController",d);j.directive("ngDelete",[b]);j.directive("ngTriggersubmit",[i]);j.directive("ngInitial",[g]);j.directive("ngGotopath",[e]);j.directive("ngMessagemodel",[c]);j.service("$jsUrl",h);j.service("$jsValidation",a);j.service("$jsTooltip",f)})});
define(["jquery","jquery.ui","jquery.validation","jquery-scrollto","bootstrap","angular","angular-bootstrap"],function(){$(function(){var b=angular.module("jslibrary.form",["ui.bootstrap"]),a=function(c,d){var e=this;this.modalInstance=null;this.options={selectorCodigo:"[data-selector-codigo]",modal:{backdrop:true,keyboard:true},validation:{rules:{},messages:{},highlight:function(f){$(f).closest(".form-group").addClass("has-error")},success:function(f){$("input[name='"+f.attr("for")+"']").addClass("valid").closest(".form-group").removeClass("has-error")},errorPlacement:function(f,h){var g=h.closest(".form-group").find(".help-block");if(g.length){g.html("<li>"+f.html()+"</li>")}else{if(f.text()!==""){h.closest(".form-group").append("<ul class='help-block'><li>"+f.html()+"</li></ul>")}}},invalidHandler:function(k,h){var j=h.numberOfInvalids();if(j>0){var g=h.invalidElements();var i=$(g[0]);var f=$("label[for='"+i.attr("name")+"']");if(f.length>0){$("label[for='"+i.attr("name")+"']").ScrollTo({offsetTop:49})}else{$(g[0]).ScrollTo({offsetTop:59})}}},submitHandler:function(f){if($(e.options.selectorCodigo).val()!==""){c.$apply(function(){e.modalInstance=d.open(e.options.modal);e.modalInstance.result.then(function(g){if(g){f.submit()}});e.modalInstance.opened.then(function(g){if(g){setTimeout(function(){$(".modal").find(".modal-footer").find("button").eq(0).focus();$(".modal").draggable({cursor:"move"})},100)}})})}else{f.submit()}}}};this.validate=function(f){$("input[required=required]").each(function(){$("label[for='"+$(this).attr("id")+"']").prepend("* ")});return $(f).validate(this.options.validation)}};b.service("$jsValidation",["$rootScope","$modal",a])})});